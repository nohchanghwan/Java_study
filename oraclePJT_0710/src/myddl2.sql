--1번

CREATE TABLE MEMBER(
		MEMBER_ID	NUMBER(10) PRIMARY KEY,
		NAME		VARCHAR2(25) NOT NULL,
		ADDRESS		VARCHAR2(100),
		CITY		VARCHAR2(30),
		PHONE		VARCHAR2(15),
		JOIN_DATE	DATE DEFAULT SYSDATE NOT NULL
);
	
CREATE TABLE TITLE(
		TITLE_ID	NUMBER(10) PRIMARY KEY,
		TITLE		VARCHAR2(60) NOT NULL,
		DESCRIPTION VARCHAR2(400) NOT NULL,
		RATING		VARCHAR2(20) CHECK(RATING IN('18가','15가','12가','전체가')),
		CATEGORY	VARCHAR2(20) CHECK(CATEGORY IN('드라마','코미디','액션','아동','SF','다큐멘터리')),
		RELEASE_DATE	DATE	
);

CREATE TABLE TITLE_COPY(
		COPY_ID		NUMBER(10),
		TITLE_ID	NUMBER(10) REFERENCES TITLE(TITLE_ID),
		STATUS		VARCHAR2(20) CHECK(STATUS IN('대여가능','파손','대여중','예약')) NOT NULL,
		PRIMARY KEY(COPY_ID,TITLE_ID)
);

CREATE TABLE RENTAL(
		BOOK_DATE	DATE DEFAULT SYSDATE,
		MEMBER_ID	NUMBER(10) REFERENCES MEMBER(MEMBER_ID),
		COPY_ID		NUMBER(10) REFERENCES TITLE_COPY(COPY_ID),
		TITLE_ID	NUMBER(10) REFERENCES TITLE_COPY(TITLE_ID),
		ACT_RET_DATE	DATE,
		EXP_RET_DATE	DATE DEFAULT SYSDATE+2,
		PRIMARY KEY(BOOK_DATE,MEMBER_ID,COPY_ID,TITLE_ID)
);

CREATE TABLE RESERVATION(
		RES_DATE	DATE PRIMARY KEY,
		MEMBER_ID	NUMBER(10) REFERENCES MEMBER(MEMBER_ID),
		TITLE_ID	NUMBER(10) REFERENCES TITLE(TITLE_ID),
		PRIMARY KEY(RES_DATE,MEMBER_ID,TITLE_ID)
);


